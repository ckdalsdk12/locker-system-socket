# locker-system-socket
소켓을 이용한 사물함 시스템 구현

## 프로그램 설명
유닉스 도메인 소켓을 이용하여 서버 - 클라이언트 간 통신하고  
서버(사물함)에 클라이언트(사용자)가 입력한 문자열을 저장 및 불러오기 하는 사물함 시스템의 구현입니다.

본 프로그램은 리눅스 환경에서만 구동 가능합니다.

각 파일(코드)의 역할은 다음과 같습니다.

* locker.h : 사물함 구조체가 정의되어 있는 파일
* locker_info.c : 현재 사물함의 상태를 전송 (서버 측) 및 수신 (클라이언트 측) 하는 함수가 정의되어 있는 파일
* reader.c : 널 문자가 나올 때까지 문자열을 읽는 함수가 정의되어 있는 파일
* server.c : 서버 (사물함) 측 코드가 정의되어 있는 파일
* client.c : 클라이언트 (사용자) 측 코드가 정의되어 있는 파일

## 사용 방법
### 1. 서버 프로그램과 클라이언트 프로그램 컴파일
server.c와 client.c를 컴파일 합니다.  
server.c의 경우 스레드 사용으로 인해 -lpthread 옵션을 필요로 합니다.  
* 서버 예시 : ```gcc -o server server.c -lpthread```
* 클라이언트 예시 : ```gcc -o client client.c```

### 2. 서버(사물함) 실행
서버를 실행합니다.  
한 개의 서버(한 개의 프로세스)만 실행하여 주십시오.  
실행 시 사물함의 개수를 지정하기 위해 매개변수(파라미터)로 정수를 받습니다.
* 예시 : ```./server 5``` (사물함 5개 생성)

### 3. 클라이언트 실행
클라이언트를 실행합니다.  
클라이언트 실행 이전에 서버가 실행되어 있어야 하며  
여러 개의 클라이언트(여러 개의 프로세스)를 실행할 수 있습니다.
* 예시 : ```./client```

### 4. 시스템 사용
서버에서는 5초마다 사물함의 상태가 출력되어 모니터링할 수 있고 실행 이후 별도의 동작이 필요하지 않습니다.  
서버 프로세스가 종료되어도 현재 사물함의 상태는 파일로 저장되며 재실행 시 파일을 불러와 상태가 복구됩니다.

클라이언트에서는 실행 시의 사물함의 상태가 출력되어 (-1을 입력하여 사물함 상태 새로고침 가능)  
출력된 정보를 기반으로 원하는 사물함을 선택할 수 있고 비밀번호와 저장할 문자열을 지정할 수 있습니다.
